/**
 * Lucid Tabs
 * Easy tabs with minimal markup.
 *
 * Copyright (c) 2012 PJ Dietz
 * Version: 2.0.0
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * http://pjdietz.com/jquery-plugins/lucid-tabs/
 */
(function($){"use strict";var TabSet,Tab,Page;TabSet=function(elemTabSet,options){var elemTabs,elemTab,elemPage,tab,i,u;this.initialized=false;this.options=$.extend({},$.fn.tabs.defaults,options);this.selected=this.options.selected;this.tabs=[];elemTabs=this.options.locateTabs(elemTabSet);for(i=0,u=elemTabs.length;i<u;i+=1){elemTab=$(elemTabs[i]);elemPage=this.options.locatePages(elemTab,elemTabSet);elemPage.hide();tab=new Tab(elemTab,elemPage,this);this.tabs.push(tab);}
if(this.options.selected!==false){this.select(this.options.selected);}
this.initialized=true;};TabSet.prototype={getSelection:function(){var selection,i,u;selection=[];for(i=0,u=this.tabs.length;i<u;i+=1){if(this.tabs[i].selected){selection.push(i);}}
return selection;},select:function(tab){var i,u;if(tab instanceof Tab&&tab.tabSet===this){this.selectTab(tab);}else if(!isNaN(tab)){tab=this.getTabAtIndex(tab);if(tab){this.selectTab(tab);}}else if(tab==="*"){this.selectAll();}else if($.isArray(tab)){for(i=0,u=tab.length;i<u;i+=1){this.select(tab[i]);}}else if(typeof tab==="string"){this.select($(tab));}else if(tab instanceof jQuery){tab=tab.data("Tab");if(tab){this.select(tab);}}},deselect:function(tab){var i,u;if(tab instanceof Tab&&tab.tabSet===this){this.deselectTab(tab);}else if(!isNaN(tab)){tab=this.getTabAtIndex(tab);if(tab){this.deselectTab(tab);}}else if(tab==="*"){if(this.options.allowNone){this.deselectAll();}}else if($.isArray(tab)){for(i=0,u=tab.length;i<u;i+=1){this.deselect(tab[i]);}}else if(typeof tab==="string"){this.deselect($(tab));}else if(tab instanceof jQuery){this.deselect(tab.data("Tab"));}},toggle:function(tab){if(tab instanceof Tab&&tab.tabSet===this){this.toggleTab(tab);}else if(!isNaN(tab)){tab=this.getTabAtIndex(tab);if(tab){this.toggleTab(tab);}}else if(typeof tab==="string"){this.toggleTab($(tab));}else if(tab instanceof jQuery){tab=tab.data("Tab");if(tab){this.toggleTab(tab);}}},selectAll:function(){var i,u;if(this.options.allowMultiple){for(i=0,u=this.tabs.length;i<u;i+=1){this.tabs[i].select();}}},selectTab:function(tab){var selection,i,u;if(!tab.selected){if(!this.options.allowMultiple){selection=this.getSelection();for(i=0,u=selection.length;i<u;i+=1){this.tabs[selection[i]].deselect();}}
tab.select();}},deselectAll:function(){var i,u;if(this.options.allowNone){for(i=0,u=this.tabs.length;i<u;i+=1){this.tabs[i].deselect();}}},deselectByIndex:function(index){if(this.tabs[index].selected){if(this.options.allowNone||this.getSelection().length>1){this.tabs[index].deselect();}}},deselectTab:function(tab){if(tab.selected){if(this.options.allowNone||this.getSelection().length>1){tab.deselect();}}},toggleTab:function(tab){if(tab.selected){this.deselectTab(tab);}else{this.selectTab(tab);}},getTabAtIndex:function(index){index=parseInt(index,10);if(!isNaN(index)&&index>=0&&index<this.tabs.length){return this.tabs[index];}
return false;},getIndex:function(tab){var i,u;if(tab instanceof Tab&&tab.tabSet===this){for(i=0,u=this.tabs.length;i<u;i+=1){if(this.tabs[i]===tab){return i;}}}
return false;}};Tab=function(elemTab,elemPage,tabSet){this.elemTab=elemTab;elemTab.data("Tab",this);elemTab.click(Tab.handleClick);this.page=new Page(elemPage,this);this.tabSet=tabSet;this.selected=false;};Tab.prototype={select:function(){var cls;if(!this.selected){cls=this.tabSet.options.cssSelected;if(typeof cls==="string"&&!this.elemTab.hasClass(cls)){this.elemTab.addClass(cls);}
this.page.show();this.selected=true;this.elemTab.trigger("selected");}},deselect:function(){var cls=this.tabSet.options.cssSelected;if(this.selected){if(typeof cls==="string"&&this.elemTab.hasClass(cls)){this.elemTab.removeClass(cls);}
this.page.hide();this.selected=false;this.elemTab.trigger("deselected.lucidtabs");}}};Tab.handleClick=function(event){var tab;tab=$(event.target).data("Tab");tab.tabSet.toggle(tab);return false;};Page=function(elemPage,tab){this.elemPage=elemPage;this.tab=tab;this.visible=false;};Page.prototype={show:function(){if(!this.visible){if(this.tab.tabSet.initialized){this.tab.tabSet.options.showPage(this.elemPage);}else{this.elemPage.show();}
this.visible=true;}},hide:function(){if(this.visible){this.tab.tabSet.options.hidePage(this.elemPage);this.visible=false;}}};$.fn.extend({tabs:function(method,options){var rtn,getter;rtn=this.each(function(){var tabObj;tabObj=$(this).data("TabSet");if(typeof tabObj==="undefined"){options=method;method="create";tabObj=new TabSet($(this),options);$(this).data("TabSet",tabObj);}
switch(method){case"getSelection":getter=tabObj.getSelection();return false;case"select":tabObj.select(options);break;case"deselect":tabObj.deselect(options);break;case"toggle":tabObj.toggle(options);break;}});if(typeof getter!=="undefined"){return getter;}
return rtn;}});$.fn.tabs.defaults={allowNone:false,allowMultiple:false,cssSelected:"selected",selected:0,locateTabs:function(elemTabSet){return elemTabSet.find("a[href^=#]");},locatePages:function(elemTab){return $(elemTab.attr("href"));},showPage:function(elemPage){elemPage.show();},hidePage:function(elemPage){elemPage.hide();}};}(jQuery));